---
layout: default
title: WSL2 で github.io にページを作ったときのトラブルシューティング
---
## WSL2 で github.io にページを作ったときのトラブルシューティング
GitHub Pages を作ろうと思ったものの、Jekyll が Windows に対応していないとのことで、公式サイトの手順をもとに WSL2 を使って構築しました。そのときいろいろと苦労したので記録しておきます。なお、以降で「現時点」と書かれている場合は 2021/08/08 時点の情報となりますのでご注意ください。

また、一部は記憶を頼りにして書いているので間違っている場合もあるかもしれません。

### gem update でパーミッションエラー
手順通りに進めていって、gem update すると /var/lib/gems の権限がないということでエラーになりました。確かめてみると root:root になっていて、たしかに権限がありません。あれこれ調べた結果、そもそもここのディレクトリの権限をどうこうするのではなく、gem を保存するディレクトリを権限があるホームディレクトリの直下にしたほうがいいだろうということで、環境変数 GEM_HOME (と PATH) を書き換えることにしました。その後、gem update に成功しました。

### gem install で引数の数が違うという内容のエラー
さらに手順を進めていくと、jekyll と bundler をインストールするところで以下のエラーになりました。
```
wrong number of arguments (given 4, expected 1)
```
手順では ruby2.5 と ruby2.5-dev をインストールしていましたが、gem -v で gem は 2.7 になっていたので、ruby も 2.7 に入れ替えてみることにしました。いったん ruby2.5 と ruby2.5-dev を削除してから ruby2.7 と ruby2.7-dev をインストールしたところ、上記エラーは解消しました。

そもそも ruby2.5 は現時点で EOL みたいですね。

### bundle update でエラー
jekyll new した後で Gemfile を少し変えてから bundle update したときにエラーになった (エラーの詳細は忘れました) のですが、どうやら jekyll new したときにできた Gemfile.lock が悪さをしていたみたいで、いったん Gemfile.lock (.lock が付く方のファイル) を削除してから bundle update しなおすと成功しました。

ここまでの手順で、ローカルで動作確認するところまでできました。  
しかしつまずきポイントが多かったこともあり、難易度は高い気がしました。
